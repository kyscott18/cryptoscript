import type { Call } from "hotscript";
import { assertType, test } from "vitest";
import type { NibbleToBits, NibblesToWord, _e } from "./bits.js";

test("nibble to bits", () => {
  assertType<Call<NibbleToBits, "5">>([false, true, false, true] as [
    false,
    true,
    false,
    true,
  ]);
  assertType<Call<NibbleToBits, "a">>([true, false, true, false] as [
    true,
    false,
    true,
    false,
  ]);
});

test("nibbles to word", () => {
  const t = [
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
  ] as [
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
    true,
    true,
    true,
    false,
  ];

  assertType<
    Call<
      NibblesToWord,
      [_e, _e, _e, _e, _e, _e, _e, _e, _e, _e, _e, _e, _e, _e, _e, _e]
    >
  >(t);
});
